<% properties = locals[:properties] %>

<dl class="govuk-summary-list">
  <% properties.each do |property| %>
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        <code><%= property.name %></code>

        <% if property.deprecated? %>
          <p class="govuk-tag govuk-tag--red">
            Deprecated
          </p>
        <% end %>
      </dt>
      <dd class="govuk-summary-list__value">
        <p class="govuk-caption-m">
          <% if property.nullable? %>
              Optional
          <% end %>

          <% if !property.object_schema_name %>
            <%= property.type_description %>
          <% elsif property.type == 'array' %>
            Array of <%= link_to property.object_schema_name, "##{property.object_schema_name.parameterize}-object" %> objects
          <% else %>
            <%= link_to property.object_schema_name, "##{property.object_schema_name.parameterize}-object" %> object
          <% end %>
        </p>

        <% if property.attributes.description %>
          <div class="govuk-!-margin-top-4">
            <%= markdown_to_html property.attributes.description %>
          </div>
        <% end %>

        <% if property.example %>
          <p class="govuk-body">
            Example: <code><%= property.example.is_a?(Array) ? json_code_sample(property.example) : property.example.inspect %></code>
          </p>
        <% end %>

        <% if property.enum %>
          <p class="govuk-body">
            Possible values:
          </p>

          <ul class="govuk-list govuk-list--bullet">
            <% property.enum.each do |item| %>
              <li><code><%= item.inspect %></code></li>
            <% end %>
          </ul>
        <% end %>
      </dd>
    </div>
  <% end %>
</dl>
